---
layout: post
title: 게임의 수명 예측하기
author: 황찬주
brief: 로그를 통해 게임의 수명을 예측할 수 있는 방법을 소개합니다.
date: 2015-04-06
---

##'이 게임은 5일뒤에 사망합니다.'

게임 개발을 하면서 생각보다 흔하게 일어나는 문제가 컨텐츠의 기대 수명과 유저가 소비하는 컨텐츠의 속도 차이이다. 개발팀이 의도한 컨텐츠 소모 속도와 유저의 컨텐츠 소모 속도가 다르다. 

>   어느 스테이지형 RPG게임의 오픈 후 상황   

>   *신규 RPG의 게임이 상당히 재미있다는 소문이 나면서 유저들이 모였다. 그러나 오픈 5일만에 최고 스테이지에 도달하는 유저들이 생겨났다. 할게 없다는 유저의 불평이 이어졌고, 이 유저들은 심지어 높았던 앱 평점은 낮게 주기도 했다. '재미있지만 후반에 할게 없음.' 개발팀은 이들을 위해 후반 컨텐츠를 추가하였다. 그리고 컨텐츠가 빠르게 소모되지 않게 밸런스를 높이고 유저들이 필드에서 파밍을 유도하였다. 이 컨텐츠를 접한 유저들은 '노가다 게임'이라는 불평을 했다. 불평을 잠재우려 밸런스를 조정하니 다시 컨텐츠를 빠르게 소비하고, 할게 없다고 불평한다.*

 많은 게임들이 재미있는 플레이에도 불구하고 인기를 유지하지 못한다. 위 게임의 문제는 유저가 소비하는 속도가 만드는 속도를 초과한다는 것이다. 가장 좋은 해결책은 사람을 더 뽑아서 두 팀이 업데이트를 병렬로 준비하는 것이다. 유저가 할 컨텐츠가 끊기지 않기 위해서... 

##이 프로젝트의 목적

 게임은 컨텐츠라는 생명력을 가지고 있고, 플레이어들이 플레이로 생명력을 소비한다. 모든 생명력이 소진되면 플레이어는 게임에서 더 이상 할 것이 없다. 'Project oldRasputin'은 컨텐츠의 생명력이 깎이는 속도를 측정한다. 
 
    컨텐츠를 소비하기까지 얼마의 시간을 플레이 했는가?

질문을 약간만 바꿔도 오픈 이후 기획팀이 많이 물어보는 질문들이다.

*   각 레벨업에 걸리는 플레이 타임은?
*   각 스테이지를 클리어하는 플레이 타임은?
*   각 퀘스트를 클리어 하는 플레이 타임은?

개발팀은 의도와 상관없이 만드는 게임의 전문가가 된다. 때로는 플레이어를 과소평가하고, 때로는 과대평가한다. 이 프로젝트를 통해 유저들이 개발팀의 계획에 맞게 소비를 하고 있는지 측정할 수 있고, 이를 통해 올바른 미래를 계획할 수 있다.

**\#1**   
 접속 시간을 기준으로 측정을 하기 때문에 각 컨텐츠의 소모속도를 정확히 측정이 가능하다. 측정해 보니 오픈 5일만에 모든 컨텐츠를 소비하는 유저는 아이디를 10여명이 공유한 '게임을 전문적으로 플레이하는 집단(?)'이다. 거의 24시간 내내 접속을 유지하였고, 5일만에 모두 소비하였다. 시간은 플레이 타임만 고려한다. 컨텐츠가 소진되는 시간은 5일이 아니라 110시간이다. 하루에 2시간씩 게임을 하는 유저는 한달도 넘게 게임을 할 수 있는 컨텐츠이다. 
 
 과연 후반 컨텐츠를 빠르게 준비해야 했을까?

**\#2**   
 유저의 플레이 숙련도는 한 번에 크게 바뀌지 않는다. 지금까지 소모해온 속도를 기준으로 다른 유저와의 비교로 유저가 어느 분류에 속하는지 확인하여 앞으로 컨텐츠 소모 속도를 예측하여 플레이어 별로 남은 수명을 진단할 수 있다. 스테이지형 게임에서 플레이어가 스테이지를 클리어하는 시간을 측정하면 새로운 플레이어가 얼마만에 최종 스테이지까지 클리어 할 수 있을지 예측할 수 있다.

플레이어 숙련도 구분
[Box  plot](http://en.wikipedia.org/wiki/Box_plot)으로 플레이어 숙련도를 네 단계로 구분한다. 컨텐츠의 소비 속도가 빠르면 숙련도가 높은 유저로 정의한다.  그래프에 따른 숙련도는 아래와 같다.

![Box plot](/img/posts/2015-03-18-analyzing_blog_using_ga/boxnwhiskr.png)   
*시간이 빠를 수록 숙련도가 높은 플레이어이다.*

이러한 속도는 개발팀이 의도한 것인가?

**\#3**   
측정의 경험과 개발의 경험상 유저의 속도를 예측하는 것은 리소스 낭비이다. 정확히 예측한다고 해도 벨런스에 따라 바뀌고 다시 계산을 해야한다. 그래서 실제 측정을 통해 변경하는 것이 가장 효율적이다.


##측정 방법

이 프로젝트는 게임에 두 가지 로그만 설정하면 측정할 수 있다.

1.  컨텐츠의 시작, 종료 로그    
    어떤 컨텐츠의 종료가 다음의 시작을 의미하는 할 수도 있고 아닐 수도 있다. 레벨의 경우 2레벨 종료가 3레벨의 시작이다. 하지만 스테이지형 게임에서는 2스테이지 종료가 3스테이지의 시작을 의미하지 않는다. 게임에 따라 스테이지 첫 시도를 시작으로 볼 수도 있다. 게임의 장르와 형식에 따라 다르게 해석해야한다.
    
2.   플레이어의 세션을 만들 수 있는 로그   
    로그 아웃이 없는 모바일 게임에서 로그 아웃을 추정하기 위해 플레이어의 행동을 로그로 남기고 그 행동을 통해 플레이어의 접속을 확인한다. 이 방법이 힘들다면 몇 분마다 신호만 보내주는 심장박동 처럼 남겨도 된다.  그리고 수분동안 아무 행동이 없으면 로그 아웃으로 추정한다.

즉, Project oldRasputin는 게임에서 로그를 남긴 로그를 이용하여 세션유지 시간을 플레이 타임으로 각 컨텐츠의 시작부터 종료까지의 시간을 뽑아낸다.

>   플레이 타임 유추    
>   다양한 로그가 기록될 수록 플레이 타임 유추가 정확해진다. 예를 들어 1분 마다 정기적으로 의미 없는 신호를 보내주는 로그보다 규칙적이지 않지만 3분정도 마다 행동을 보내주는 로그가 좋다. 플레이어의 행동에 따라 접속만 해있는 것인지, 플레이를 하는 것인지도 확인 할 수 있기 때문이다. 게임에 따라 접속만하고 실제 플레이를 하지 않는 유저를 골라낼 수도 있다. 

##활용법 

스테이지형 게임의 각 스테이지 클리어 속도를 나타낸 그래프를 살펴보자. x 축은 레벨, y축은 시간이다.
![Box plot 분포 그래프](/img/posts/2015-03-18-analyzing_blog_using_ga/whisker_2.png)

**\#1**    
유저의 시간을 찍으면 유저의 숙련도를 유추할 수 있다.
레벨 컨텐츠의 하드 코어 유저의 플레이와 라이트 유저의 플레이
![Box plot](/img/posts/2015-03-18-analyzing_blog_using_ga/whisker_3.png)

**\#2**   
간단한 그래프로 게임의 현황을 파악하여 다양한 곳에 쓸 수 있다. 
   
*   마지막 스테이지의 클리어 속도가 다른 레벨에 비해 많이 길다. 
*   평균적으로 대략 1500분이면 모든 스테이지를 클리어한다.
*   15, 50스테이지에서 시간의 분포가 위로 넓어진다. 플레이를 어렵게 하는 요소가 있는가?
  
**\#3**   
이 프로젝트는 게임의 베타 버전에 추가하는 것이 가장 좋다. 막바지에 크런치 모드로 버그를 잡을 때 로그만 남기고, 베타 이후 컨텐츠의 소모 속도를 보면서 계획을 세우는 것이 가장 효과적인 사용이다.

>   어떤 게임은 수년을 개발하고, 3일만에 유저들이 모든 컨텐츠를 소모해버렸다. 한번 더 준비중인 컨텐츠는 있었지만 웰메이드 컨텐츠로 만드는 시간은 절대적으로 부족하였다. 오픈 이후 측정으로 문제를 확인했지만 개발팀의 인원이 절대적으로 부족했다.

##몇 번의 테스트에서 나온 문제점

**\#1**    
세션 타임 아웃 설정, 로그를 통해 로그 아웃을 유추하기 때문에 세션 타임 아웃시간에 따라 결과도 약간씩 수정된다. 30분의 세션 타임 아웃을 설정했을 경우 30분 안에 재 접속을 했을 경우 그 중간을 플레이 타임으로 보기 때문이다. 설정을 짧게도 가능하지만 그만큼 로그양이 늘어난다.

**\#2**    
관찰하는 숙련도가 자주 변화 경우 게임 벨런스의 문제가 있는 경우가 많다. 너무 운에 치우치거나 게임의 난이도가 너무 쉽거나 이런 벨런스의 문제가 발견되면 숙련도를 측정할 수 없다.

**\#3**    
테스트 계정들은 따로 정리는 해 놓는 편이 좋다. 예외 상황이라고 무시하던 테스트 계정이 전체 그래프를 왜곡 시키는 일도 종종 발생한다. id를 따로 정리하거나 로그에 확인할 수 있는 필드를 넣어주는 것이 좋다. 

##결론

이 프로젝트는 유저들이 컨텐츠를 소비하는 시간을 나타내 주는 현황 그래프을 만들어낸다. 그리고 이 그래프로 게임에 대한 다양한 인사이트를 만들고 문제점을 확인할 수 있다. 

위 방법으로 어떤 게임이든 시도해 볼 수 있다. **Have a try. Better with [us](<mailto:whisker@boxnwhis.kr>).**

